<odoo>
  <data>
    <!-- Inherit Purchasr order form view -->

    <record model="ir.ui.view" id="purchase_order_form_inherit">
      <field name="name"> purchase.order.form.inherit</field>
      <field name="model">purchase.order</field>
      <field name="inherit_id" ref="purchase.purchase_order_form"/>
      <field name="arch" type="xml">
        <field name="partner_ref" position="after">
          <field name="is_sales"/>
        </field>

        <xpath expr="//group[1]" position="after">
          <group>
            <group name="dates" string="Sales Period" modifiers="{}" attrs="{'invisible':[('is_sales','=',False)]}">
              <label for="date_start" string="Period" modifiers="{}"/>
              <div style="display: inline;" modifiers="{}">
                <field name="date_sales_from" class="oe_inline" on_change="1"/>
                 to 
                <field name="date_sales_to" class="oe_inline" on_change="1"/>
              </div>
              <field name="categ_ids" widget="many2many_tags"/>
              <field name="oper_type" widget="radio" options="{'horizontal':True}"/>
            </group>
          </group>
          <group attrs="{'invisible':[('is_sales','=',False)]}">
            <button name="prepare_products" type="object" string="Prepare Products" icon="fa-gears" class="btn-primary"/>
          </group>


        </xpath>

        <xpath expr="//field[@name='order_line']/tree/field[@name='name']" position="after">
          <!-- <field name="user_qty" force_save="1"/> -->
          <field name="onhand_qty" attrs="{'column_invisible':[('parent.is_sales','=',False)]}" force_save="True"/>
          <field name="forecast_qty" attrs="{'column_invisible':[('parent.is_sales','=',False)]}" force_save="True"/>
          <field name="sold_qty" attrs="{'column_invisible':[('parent.is_sales','=',False)]}" force_save="True"/>
          <field name="sold_count" attrs="{'column_invisible':[('parent.is_sales','=',False)]}" force_save="True"/>

        </xpath>

        <xpath expr="//button[@name='print_quotation']" position="attributes">
          <attribute name="string">Print</attribute>
        </xpath>
        <xpath expr="//button[@name='button_confirm'][2]" position="before">
          <button name="action_confirm" type="object" states="draft" string="Confirm" class="oe_highlight" />
        </xpath>

        <xpath expr="//button[@name='button_confirm'][2]" position="attributes">
          <attribute name='states'>confirm</attribute>
          <attribute name="groups">purchase_custome.group_purchase_general_manager,purchase_custome.group_purchase_department_manager</attribute>
        </xpath>

        <xpath expr="//button[@name='button_approve']" position="attributes">
          <attribute name="groups">purchase_custome.group_purchase_general_manager</attribute>
        </xpath>

        <xpath expr="//button[@name='button_cancel']" position="replace">
          <button name="button_cancel" states="draft,to approve,purchase,confirm" string="Cancel" type="object" />
        </xpath>

        <xpath expr="//button[@name='action_rfq_send']" position="replace">
        </xpath>

        <xpath expr="//field[@name='state']" position="replace">
          <field name="state" widget="statusbar" statusbar_visible="draft,confirm,purchase" readonly="1"/>
        </xpath>

        <xpath expr="//page[1]" position="after">
          <page string="Additional Info">
            <group>
              <field name="container_count"/>
              <field name="proforma_invoice_date" />
              <field name="transfer_date" />
              <field name="documents_to_clearance" />
              <field name="shipping_policy_number" />
              <field name="clearance_cost" />
              <field name="total_cost" />
            </group>
          </page>
        </xpath>

      </field>
    </record>

    <!-- Tree purchase order -->
    <record model="ir.ui.view" id="purchase_order_view_tree_inherit">
      <field name="name"> purchase.order.tree.inherit</field>
      <field name="model">purchase.order</field>
      <field name="inherit_id" ref="purchase.purchase_order_view_tree"/>
      <field name="arch" type="xml">
        <field name="invoice_status" position="after">
          <field name="proforma_invoice_date" />
          <field name="transfer_date" />
          <field name="container_count"/>
          <field name="documents_to_clearance"/>
          <field name="shipping_policy_number"/>
          <field name="check_partially_delivery"/>
          <field name="check_fully_delivery"/>
          <field name="check_partially_paid"/>
          <field name="check_fully_paid"/>
          <field name="total_cost"/>
        </field>
      </field>
    </record>

    <!-- inherit action purchase order-->
    <record id="purchase.purchase_form_action" model="ir.actions.act_window">
      <field name="name">Purchase Orders</field>
      <field name="type">ir.actions.act_window</field>
      <field name="res_model">purchase.order</field>
      <field name="view_mode">tree,kanban,form,pivot,graph,calendar,activity</field>
      <field name="view_id" ref="purchase.purchase_order_view_tree"/>
      <field name="domain">[('state','in',('draft','sent','purchase','to approve','confirm', 'done'))]</field>
      <field name="search_view_id" ref="purchase.purchase_order_view_search"/>
      <field name="context">{}</field>
      <field name="help" type="html">
        <p class="o_view_nocontent_smiling_face">
          Create a quotation
        </p>
        <p>
          It will be converted into a purchase order.
        </p>
      </field>
    </record>

    <menuitem action="purchase.purchase_form_action" id="purchase.menu_purchase_form_action" parent="purchase.menu_procurement_management" sequence="0"/>

    <menuitem action="purchase.purchase_rfq" id="purchase.menu_purchase_rfq" parent="purchase.menu_procurement_management" sequence="10"/>


  </data>
</odoo>